<!DOCTYPE html>
<script type="text/javascript" charset="utf-8">
    chrome.application.addEventListener( 'message', function( event ) {
        if ( event.name != 'valueForSetting' ) {
            return
        }
        
        var key = event.message
        var value = chrome.extension.settings.getItem( key )

        chrome.application.activeBrowserWindow.activeTab.page.dispatchMessage( 'setValueForSetting', { 'key': key, 'value': value } )
    }, false)

    chrome.extension.settings.addEventListener( 'change', function( event ) {
        chrome.application.activeBrowserWindow.activeTab.page.dispatchMessage( 'setValueForSetting', { 'key': event.key, 'value': event.newValue } )
    }, false)
</script>